var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xe(L){return L&&L.__esModule&&Object.prototype.hasOwnProperty.call(L,"default")?L.default:L}var se={exports:{}};/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */(function(L,_e){(function(T){var x=T.setTimeout,P=T.clearTimeout,w=T.XMLHttpRequest,de=T.XDomainRequest,ue=T.ActiveXObject,Q=T.EventSource,N=T.document,Re=T.Promise,K=T.fetch,ce=T.Response,Z=T.TextDecoder,le=T.TextEncoder,k=T.AbortController;if(typeof window<"u"&&typeof N<"u"&&!("readyState"in N)&&N.body==null&&(N.readyState="loading",window.addEventListener("load",function(e){N.readyState="complete"},!1)),w==null&&ue!=null&&(w=function(){return new ue("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(e){function r(){}return r.prototype=e,new r}),Date.now||(Date.now=function(){return new Date().getTime()}),k==null){var Ae=K;K=function(e,r){var n=r.signal;return Ae(e,{headers:r.headers,credentials:r.credentials,cache:r.cache}).then(function(t){var o=t.body.getReader();return n._reader=o,n._aborted&&n._reader.cancel(),{status:t.status,statusText:t.statusText,headers:t.headers,body:{getReader:function(){return o}}}})},k=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function ve(){this.bitsNeeded=0,this.codePoint=0}ve.prototype.decode=function(e){function r(d,u,i){if(i===1)return d>=128>>u&&d<<u<=2047;if(i===2)return d>=2048>>u&&d<<u<=55295||d>=57344>>u&&d<<u<=65535;if(i===3)return d>=65536>>u&&d<<u<=1114111;throw new Error}function n(d,u){if(d===6*1)return u>>6>15?3:u>31?2:1;if(d===6*2)return u>15?3:2;if(d===6*3)return 3;throw new Error}for(var t=65533,o="",a=this.bitsNeeded,f=this.codePoint,c=0;c<e.length;c+=1){var s=e[c];a!==0&&(s<128||s>191||!r(f<<6|s&63,a-6,n(a,f)))&&(a=0,f=t,o+=String.fromCharCode(f)),a===0?(s>=0&&s<=127?(a=0,f=s):s>=192&&s<=223?(a=6*1,f=s&31):s>=224&&s<=239?(a=6*2,f=s&15):s>=240&&s<=247?(a=6*3,f=s&7):(a=0,f=t),a!==0&&!r(f,a,n(a,f))&&(a=0,f=t)):(a-=6,f=f<<6|s&63),a===0&&(f<=65535?o+=String.fromCharCode(f):(o+=String.fromCharCode(55296+(f-65535-1>>10)),o+=String.fromCharCode(56320+(f-65535-1&1023))))}return this.bitsNeeded=a,this.codePoint=f,o};var De=function(){try{return new Z().decode(new le().encode("test"),{stream:!0})==="test"}catch(e){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+e)}return!1};(Z==null||le==null||!De())&&(Z=ve);var b=function(){};function j(e){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=b,this.onload=b,this.onerror=b,this.onreadystatechange=b,this._contentType="",this._xhr=e,this._sendTimeout=0,this._abort=b}j.prototype.open=function(e,r){this._abort(!0);var n=this,t=this._xhr,o=1,a=0;this._abort=function(i){n._sendTimeout!==0&&(P(n._sendTimeout),n._sendTimeout=0),(o===1||o===2||o===3)&&(o=4,t.onload=b,t.onerror=b,t.onabort=b,t.onprogress=b,t.onreadystatechange=b,t.abort(),a!==0&&(P(a),a=0),i||(n.readyState=4,n.onabort(null),n.onreadystatechange())),o=0};var f=function(){if(o===1){var i=0,l="",A=void 0;if("contentType"in t)i=200,l="OK",A=t.contentType;else try{i=t.status,l=t.statusText,A=t.getResponseHeader("Content-Type")}catch{i=0,l="",A=void 0}i!==0&&(o=2,n.readyState=2,n.status=i,n.statusText=l,n._contentType=A,n.onreadystatechange())}},c=function(){if(f(),o===2||o===3){o=3;var i="";try{i=t.responseText}catch{}n.readyState=3,n.responseText=i,n.onprogress()}},s=function(i,l){if((l==null||l.preventDefault==null)&&(l={preventDefault:b}),c(),o===1||o===2||o===3){if(o=4,a!==0&&(P(a),a=0),n.readyState=4,i==="load")n.onload(l);else if(i==="error")n.onerror(l);else if(i==="abort")n.onabort(l);else throw new TypeError;n.onreadystatechange()}},d=function(i){t!=null&&(t.readyState===4?(!("onload"in t)||!("onerror"in t)||!("onabort"in t))&&s(t.responseText===""?"error":"load",i):t.readyState===3?"onprogress"in t||c():t.readyState===2&&f())},u=function(){a=x(function(){u()},500),t.readyState===3&&c()};"onload"in t&&(t.onload=function(i){s("load",i)}),"onerror"in t&&(t.onerror=function(i){s("error",i)}),"onabort"in t&&(t.onabort=function(i){s("abort",i)}),"onprogress"in t&&(t.onprogress=c),"onreadystatechange"in t&&(t.onreadystatechange=function(i){d(i)}),("contentType"in t||!("ontimeout"in w.prototype))&&(r+=(r.indexOf("?")===-1?"?":"&")+"padding=true"),t.open(e,r,!0),"readyState"in t&&(a=x(function(){u()},0))},j.prototype.abort=function(){this._abort(!1)},j.prototype.getResponseHeader=function(e){return this._contentType},j.prototype.setRequestHeader=function(e,r){var n=this._xhr;"setRequestHeader"in n&&n.setRequestHeader(e,r)},j.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},j.prototype.send=function(){if((!("ontimeout"in w.prototype)||!("sendAsBinary"in w.prototype)&&!("mozAnon"in w.prototype))&&N!=null&&N.readyState!=null&&N.readyState!=="complete"){var e=this;e._sendTimeout=x(function(){e._sendTimeout=0,e.send()},4);return}var r=this._xhr;"withCredentials"in r&&(r.withCredentials=this.withCredentials);try{r.send(void 0)}catch(n){throw n}};function he(e){return e.replace(/[A-Z]/g,function(r){return String.fromCharCode(r.charCodeAt(0)+32)})}function pe(e){for(var r=Object.create(null),n=e.split(`\r
`),t=0;t<n.length;t+=1){var o=n[t],a=o.split(": "),f=a.shift(),c=a.join(": ");r[he(f)]=c}this._map=r}pe.prototype.get=function(e){return this._map[he(e)]},w!=null&&w.HEADERS_RECEIVED==null&&(w.HEADERS_RECEIVED=2);function ye(){}ye.prototype.open=function(e,r,n,t,o,a,f){e.open("GET",o);var c=0;e.onprogress=function(){var d=e.responseText,u=d.slice(c);c+=u.length,n(u)},e.onerror=function(d){d.preventDefault(),t(new Error("NetworkError"))},e.onload=function(){t(null)},e.onabort=function(){t(null)},e.onreadystatechange=function(){if(e.readyState===w.HEADERS_RECEIVED){var d=e.status,u=e.statusText,i=e.getResponseHeader("Content-Type"),l=e.getAllResponseHeaders();r(d,u,i,new pe(l))}},e.withCredentials=a;for(var s in f)Object.prototype.hasOwnProperty.call(f,s)&&e.setRequestHeader(s,f[s]);return e.send(),e};function ge(e){this._headers=e}ge.prototype.get=function(e){return this._headers.get(e)};function Ee(){}Ee.prototype.open=function(e,r,n,t,o,a,f){var c=null,s=new k,d=s.signal,u=new Z;return K(o,{headers:f,credentials:a?"include":"same-origin",signal:d,cache:"no-store"}).then(function(i){return c=i.body.getReader(),r(i.status,i.statusText,i.headers.get("Content-Type"),new ge(i.headers)),new Re(function(l,A){var $=function(){c.read().then(function(m){if(m.done)l(void 0);else{var y=u.decode(m.value,{stream:!0});n(y),$()}}).catch(function(m){A(m)})};$()})}).catch(function(i){if(i.name!=="AbortError")return i}).then(function(i){t(i)}),{abort:function(){c!=null&&c.cancel(),s.abort()}}};function V(){this._listeners=Object.create(null)}function we(e){x(function(){throw e},0)}V.prototype.dispatchEvent=function(e){e.target=this;var r=this._listeners[e.type];if(r!=null)for(var n=r.length,t=0;t<n;t+=1){var o=r[t];try{typeof o.handleEvent=="function"?o.handleEvent(e):o.call(this,e)}catch(a){we(a)}}},V.prototype.addEventListener=function(e,r){e=String(e);var n=this._listeners,t=n[e];t==null&&(t=[],n[e]=t);for(var o=!1,a=0;a<t.length;a+=1)t[a]===r&&(o=!0);o||t.push(r)},V.prototype.removeEventListener=function(e,r){e=String(e);var n=this._listeners,t=n[e];if(t!=null){for(var o=[],a=0;a<t.length;a+=1)t[a]!==r&&o.push(t[a]);o.length===0?delete n[e]:n[e]=o}};function X(e){this.type=e,this.target=void 0}function Te(e,r){X.call(this,e),this.data=r.data,this.lastEventId=r.lastEventId}Te.prototype=Object.create(X.prototype);function ee(e,r){X.call(this,e),this.status=r.status,this.statusText=r.statusText,this.headers=r.headers}ee.prototype=Object.create(X.prototype);function me(e,r){X.call(this,e),this.error=r.error}me.prototype=Object.create(X.prototype);var te=-1,I=0,q=1,W=2,re=-1,H=0,ne=1,Ce=2,Fe=3,Oe=/^text\/event\-stream(;.*)?$/i,xe=1e3,Ne=18e6,ae=function(e,r){var n=e==null?r:parseInt(e,10);return n!==n&&(n=r),oe(n)},oe=function(e){return Math.min(Math.max(e,xe),Ne)},U=function(e,r,n){try{typeof r=="function"&&r.call(e,n)}catch(t){we(t)}};function _(e,r){V.call(this),r=r||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Le(this,e,r)}function Ie(){return w!=null&&"withCredentials"in w.prototype||de==null?new w:new de}var He=K!=null&&ce!=null&&"body"in ce.prototype;function Le(e,r,n){r=String(r);var t=!!n.withCredentials,o=n.lastEventIdQueryParameterName||"lastEventId",a=oe(1e3),f=ae(n.heartbeatTimeout,45e3),c="",s=a,d=!1,u=0,i=n.headers||{},l=n.Transport,A=He&&l==null?void 0:new j(l!=null?new l:Ie()),$=l!=null&&typeof l!="string"?new l:A==null?new Ee:new ye,m=void 0,y=0,R=te,B="",J="",D="",Y="",g=H,ie=0,M=0,je=function(h,v,C,S){if(R===I)if(h===200&&C!=null&&Oe.test(C)){R=q,d=Date.now(),s=a,e.readyState=q;var E=new ee("open",{status:h,statusText:v,headers:S});e.dispatchEvent(E),U(e,e.onopen,E)}else{var p="";h!==200?(v&&(v=v.replace(/\s+/g," ")),p="EventSource's response has a status "+h+" "+v+" that is not 200. Aborting the connection."):p="EventSource's response has a Content-Type specifying an unsupported type: "+(C==null?"-":C.replace(/\s+/g," "))+". Aborting the connection.",fe();var E=new ee("error",{status:h,statusText:v,headers:S});e.dispatchEvent(E),U(e,e.onerror,E),console.error(p)}},Me=function(h){if(R===q){for(var v=-1,C=0;C<h.length;C+=1){var S=h.charCodeAt(C);(S===10||S===13)&&(v=C)}var E=(v!==-1?Y:"")+h.slice(0,v+1);Y=(v===-1?Y:"")+h.slice(v+1),h!==""&&(d=Date.now(),u+=h.length);for(var p=0;p<E.length;p+=1){var S=E.charCodeAt(p);if(g===re&&S===10)g=H;else if(g===re&&(g=H),S===13||S===10){if(g!==H){g===ne&&(M=p+1);var F=E.slice(ie,M-1),O=E.slice(M+(M<p&&E.charCodeAt(M)===32?1:0),p);F==="data"?(B+=`
`,B+=O):F==="id"?J=O:F==="event"?D=O:F==="retry"?(a=ae(O,a),s=a):F==="heartbeatTimeout"&&(f=ae(O,f),y!==0&&(P(y),y=x(function(){z()},f)))}if(g===H){if(B!==""){c=J,D===""&&(D="message");var G=new Te(D,{data:B.slice(1),lastEventId:J});if(e.dispatchEvent(G),D==="open"?U(e,e.onopen,G):D==="message"?U(e,e.onmessage,G):D==="error"&&U(e,e.onerror,G),R===W)return}B="",D=""}g=S===13?re:H}else g===H&&(ie=p,g=ne),g===ne?S===58&&(M=p+1,g=Ce):g===Ce&&(g=Fe)}}},be=function(h){if(R===q||R===I){R=te,y!==0&&(P(y),y=0),y=x(function(){z()},s),s=oe(Math.min(a*16,s*2)),e.readyState=I;var v=new me("error",{error:h});e.dispatchEvent(v),U(e,e.onerror,v),h!=null&&console.error(h)}},fe=function(){R=W,m!=null&&(m.abort(),m=void 0),y!==0&&(P(y),y=0),e.readyState=W},z=function(){if(y=0,R!==te){if(!d&&m!=null)be(new Error("No activity within "+f+" milliseconds. "+(R===I?"No response received.":u+" chars received.")+" Reconnecting.")),m!=null&&(m.abort(),m=void 0);else{var h=Math.max((d||Date.now())+f-Date.now(),1);d=!1,y=x(function(){z()},h)}return}d=!1,u=0,y=x(function(){z()},f),R=I,B="",D="",J=c,Y="",ie=0,M=0,g=H;var v=r;if(r.slice(0,5)!=="data:"&&r.slice(0,5)!=="blob:"&&c!==""){var C=r.indexOf("?");v=C===-1?r:r.slice(0,C+1)+r.slice(C+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(O,G){return G===o?"":O}),v+=(r.indexOf("?")===-1?"?":"&")+o+"="+encodeURIComponent(c)}var S=e.withCredentials,E={};E.Accept="text/event-stream";var p=e.headers;if(p!=null)for(var F in p)Object.prototype.hasOwnProperty.call(p,F)&&(E[F]=p[F]);try{m=$.open(A,je,Me,be,v,S,E)}catch(O){throw fe(),O}};e.url=r,e.readyState=I,e.withCredentials=t,e.headers=i,e._close=fe,z()}_.prototype=Object.create(V.prototype),_.prototype.CONNECTING=I,_.prototype.OPEN=q,_.prototype.CLOSED=W,_.prototype.close=function(){this._close()},_.CONNECTING=I,_.OPEN=q,_.CLOSED=W,_.prototype.withCredentials=void 0;var Se=Q;w!=null&&(Q==null||!("withCredentials"in Q.prototype))&&(Se=_),function(e){{var r=e(_e);r!==void 0&&(L.exports=r)}}(function(e){e.EventSourcePolyfill=_,e.NativeEventSource=Q,e.EventSource=Se})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:Pe:globalThis)})(se,se.exports);var qe=se.exports,Ue=qe.EventSourcePolyfill;const Be=Xe(Ue),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Be},Symbol.toStringTag,{value:"Module"}));export{Ge as b};
